@startuml
!include style.puml

box Logic LOGIC_COLOR_T1
participant "WalletBudgetCommand" as WalletBudgetCommand LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant "budget:Budget" as givenBudget MODEL_COLOR
participant ":Model" as Model MODEL_COLOR
participant ":Wallet" as Wallet MODEL_COLOR
participant "budgetList:BudgetList" as budgetList MODEL_COLOR
end box

[-> WalletBudgetCommand: execute()
activate WalletBudgetCommand

WalletBudgetCommand -> givenBudget: isDefault()
activate givenBudget
givenBudget -> WalletBudgetCommand: isDefault
deactivate givenBudget
    alt isDefault = true
       WalletBudgetCommand -> Model: setDefaultBudget(budget)
       activate Model

       Model -> Wallet: setDefaultBudget(budget)
       activate Wallet

       Wallet -> budgetList: setDefaultBudget(budget)
       activate budgetList

       budgetList --> Wallet: defaultBudget updated
       deactivate budgetList

       Wallet --> Model
       deactivate Wallet

       Model --> WalletBudgetCommand
       deactivate Model

    else isDefault = false
        WalletBudgetCommand -> Model: setBudget(budget)
        activate Model

        Model -> Wallet: setBudget(budget)
        activate Wallet

        Wallet -> budgetList: setBudget(budget)
        activate budgetList

        budgetList --> Wallet: budgetList updated
        deactivate budgetList

        Wallet --> Model
        deactivate Wallet

        Model --> WalletBudgetCommand
        deactivate Model

    end

[<--WalletBudgetCommand : result
deactivate WalletBudgetCommand

[<-[hidden]-WalletBudgetCommand
destroy WalletBudgetCommand

@enduml
