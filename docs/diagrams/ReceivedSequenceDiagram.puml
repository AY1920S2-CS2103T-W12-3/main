@startuml
!include style.puml

box Logic LOGIC_COLOR_T1
participant "PeopleReceivedCommand" as PeopleReceivedCommand LOGIC_COLOR
end box

box Model MODEL_COLOR_T1
participant ":Model" as Model MODEL_COLOR
participant "indicatedPerson:Person" as indicatedPerson MODEL_COLOR
participant "modifiedPerson:Person" as modifiedPerson MODEL_COLOR
participant ":AddressBook" as AddressBook MODEL_COLOR
participant ":UniquePersonList" as UniquePersonList MODEL_COLOR
end box
[-> PeopleReceivedCommand : execute()
activate PeopleReceivedCommand

[-[hidden]> PeopleReceivedCommand : a very long long text

PeopleReceivedCommand -> Model : getFilteredPersonList()
activate Model

Model --> PeopleReceivedCommand : lastShownList

PeopleReceivedCommand -> indicatedPerson : lastShownList.get(1)
activate indicatedPerson

indicatedPerson --> PeopleReceivedCommand : indicatedPerson
deactivate indicatedPerson

create modifiedPerson
PeopleReceivedCommand -> modifiedPerson : Person()
activate modifiedPerson

modifiedPerson --> PeopleReceivedCommand : modifiedPerson
deactivate modifiedPerson

PeopleReceivedCommand -> Model : setPerson(\nindicatedPerson, \nmodifiedPerson)

Model -> AddressBook : setPerson(indicatedPerson, modifiedPerson)
activate AddressBook

AddressBook -> UniquePersonList : setPerson(\nindicatedPerson, \nmodifiedPerson)
activate UniquePersonList

UniquePersonList --> AddressBook
deactivate UniquePersonList

AddressBook --> Model
deactivate AddressBook

Model --> PeopleReceivedCommand

PeopleReceivedCommand -> Model : updateFilteredPersonList()

Model --> PeopleReceivedCommand
deactivate Model

[<--PeopleReceivedCommand : result
deactivate PeopleReceivedCommand
[<-[hidden]-PeopleReceivedCommand
destroy PeopleReceivedCommand

@enduml
